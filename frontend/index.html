<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cloud Landing Page</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Welcome to Cloud Deployment - Modified</h1>
        <p style="color: brown;">This is a basic frontend hosted on GCP Compute Engine. - new</p>
        <p>you are seeing this text as a successful cicd build for frontend. all data is synchonizing properly! - <p style="color: red;">now working - pushed to frontend directory</p></p>
        <p>Backend Status: <span id="status">Loading...</span></p>
        <p>Check the backend service message: <span id="home">fetching the service message</span></p>
        
    </div>

    <script>
        const BACKEND_URL = "https://backend-service-73039269863.asia-south2.run.app"; //backend URL for my backend service
        console.log('Fetching backend status from:', `${BACKEND_URL}/status`);
        fetch(`${BACKEND_URL}/status`)
            .then(res => {
                console.log('Response status:', res.status);
                if (!res.ok) {
                    throw new Error(`HTTP error! status: ${res.status}`);
            }   
                return res.json();
            })
            
            .then(data => {
                console.log('Success:', data);
                document.getElementById('status').innerText = data.status;
                document.getElementById('status').style.color = 'green';
            })
            .catch((error) => {
                console.error('Backend connection failed', error);
                document.getElementById('status').innerText = "Failed to fetch backend";
                document.getElementById('status').style.color = 'red';
            });


        // Fetching the home dir message from the backend    
        console.log('Fetching backend home message from:', `${BACKEND_URL}/`);
        fetch(`${BACKEND_URL}/`)
            .then(res => {
                console.log('Response status for home:', res.status);
                if (!res.ok) {
                    throw new Error(`HTTP error! status: ${res.status}`);
                }
                return res.text();
            })
            .then(data => {
                console.log('Home message:', data);
                document.getElementById('home').innerText = data;
                document.getElementById('home').style.color = 'blue';
            })
            .catch((error) => {
                console.error('Failed to fetch home message', error);
                document.getElementById('home').innerText = "Failed to fetch home message";
                document.getElementById('home').style.color = 'red';
            });


    </script>
</body>
</html>